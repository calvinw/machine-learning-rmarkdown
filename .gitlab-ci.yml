image: r-base

pages:
  stage: deploy
  script:
  - apt-get update
  - apt-get -y install libcurl4-openssl-dev libxml2-dev libssl-dev pandoc python-pip
  - pip install jupyter-client
  - pip install jupytext --upgrade
  - wget -qO- "https://yihui.name/gh/tinytex/tools/install-unx.sh" | sh
  - Rscript -e "install.packages('rmarkdown')"
  - Rscript -e "install.packages('rvest')"
  
  - make
  - mkdir .public
  - cp -r * .public
  - mv .public public
  - rm -rf public/credentials.json public/google-app.js public/app.js public/google-ids.json

  artifacts:
    paths:
    - public
  only:
  - master
